# å›¢é˜ŸæŠ€èƒ½å¸‚åœºè®¾è®¡æ–‡æ¡£

## 1. æ¦‚è¿°

### 1.1 èƒŒæ™¯

å½“å‰æŠ€èƒ½å¸‚åœºä»…æ”¯æŒå†…å»ºæŠ€èƒ½ï¼ˆembed åœ¨ cocursor ä¸­ï¼‰ã€‚æœ¬è®¾è®¡æ‰©å±•æŠ€èƒ½å¸‚åœºï¼Œæ”¯æŒå›¢é˜Ÿåä½œåœºæ™¯ï¼šå›¢é˜Ÿæˆå‘˜å¯ä»¥å‘å¸ƒã€å…±äº«å’Œä¸‹è½½æŠ€èƒ½ï¼Œå®ç° P2P æœ¬åœ°ç®¡ç†ã€‚

### 1.2 æ ¸å¿ƒç‰¹æ€§

- **P2P æœ¬åœ°ç®¡ç†**ï¼šæ— éœ€ä¸­å¿ƒæœåŠ¡å™¨ï¼Œå›¢é˜Ÿæˆå‘˜ä¹‹é—´ç›´æ¥åŒæ­¥
- **Leader æ¨¡å¼**ï¼šæ¯ä¸ªå›¢é˜Ÿæœ‰ä¸€ä¸ª Leaderï¼Œè´Ÿè´£ç»´æŠ¤æˆå‘˜åˆ—è¡¨å’ŒæŠ€èƒ½ç›®å½•
- **å±€åŸŸç½‘å‘ç°**ï¼šé€šè¿‡ mDNS è‡ªåŠ¨å‘ç°åŒç½‘æ®µçš„å›¢é˜Ÿ
- **å¤šæ¥æºæŠ€èƒ½**ï¼šæ”¯æŒå†…å»ºã€é¡¹ç›®ã€å›¢é˜Ÿå…¨å±€ã€å›¢é˜Ÿé¡¹ç›®çº§ç­‰å¤šç§æ¥æº

### 1.3 è®¾è®¡åŸåˆ™

- ç®€å•ä¼˜å…ˆï¼šMVP é˜¶æ®µä¿æŒå®ç°ç®€å•
- ç¦»çº¿å‹å¥½ï¼šLeader ç¦»çº¿æ—¶å¯ä½¿ç”¨æœ¬åœ°ç¼“å­˜
- ç”¨æˆ·æ§åˆ¶ï¼šä¸‹è½½å’Œå®‰è£…åˆ†ç¦»ï¼Œç”¨æˆ·å†³å®šæ˜¯å¦è·å–

---

## 2. æŠ€èƒ½æ¥æºåˆ†ç±»

### 2.1 æ¥æºç±»å‹

| æ¥æº | æ ‡è¯† | å­˜å‚¨ä½ç½® | æè¿° |
|------|------|----------|------|
| **Builtin** | `builtin` | embed | å†…å»ºæŠ€èƒ½ï¼Œéš cocursor å‘å¸ƒ |
| **Project** | `project` | `{project}/.cocursor/skills/` | é¡¹ç›®çº§æŠ€èƒ½ï¼Œé¡¹ç›®å†…å¯è§ |
| **Team Global** | `team_global` | `~/.cocursor/team-skills/{team-id}/` | å›¢é˜Ÿå…¨å±€æŠ€èƒ½ï¼Œæ‰€æœ‰å›¢é˜Ÿæˆå‘˜å¯è§ |
| **Team Project** | `team_project` | `{project}/.cocursor/team-skills/` | å›¢é˜Ÿé¡¹ç›®çº§æŠ€èƒ½ï¼Œæ‰€æœ‰å›¢é˜Ÿæˆå‘˜å¯è§ |

### 2.2 å‘½åç©ºé—´

ä½¿ç”¨å¤åˆ ID è§£å†³åŒåå†²çªï¼š

```go
type Plugin struct {
    ID       string       `json:"id"`        // ç®€æ´ IDï¼Œå¦‚ "code-review"
    Source   PluginSource `json:"source"`    // æ¥æºç±»å‹
    TeamID   string       `json:"team_id"`   // å›¢é˜Ÿ IDï¼ˆä»…å›¢é˜ŸæŠ€èƒ½ï¼‰
    FullID   string       `json:"full_id"`   // å”¯ä¸€æ ‡è¯†ï¼Œå¦‚ "team_abc123:code-review"
}
```

### 2.3 å®‰è£…ä½ç½®

å›¢é˜ŸæŠ€èƒ½å®‰è£…æ—¶é‡å‘½åä»¥é¿å…å†²çªï¼š

```
å†…å»ºæŠ€èƒ½:   ~/.claude/skills/{skill-name}/
å›¢é˜ŸæŠ€èƒ½:   ~/.claude/skills/{team-id}-{skill-name}/
```

---

## 3. å›¢é˜Ÿç®¡ç†

### 3.1 å›¢é˜Ÿæ¨¡å‹

```go
type Team struct {
    ID             string    `json:"id"`              // UUID
    Name           string    `json:"name"`            // å›¢é˜Ÿåç§°
    LeaderID       string    `json:"leader_id"`       // Leader æˆå‘˜ ID
    LeaderEndpoint string    `json:"leader_endpoint"` // Leader åœ°å€ (IP:Port)
    CreatedAt      time.Time `json:"created_at"`
    JoinedAt       time.Time `json:"joined_at"`       // æœ¬æœºåŠ å…¥æ—¶é—´
}

type TeamMember struct {
    ID       string    `json:"id"`
    Name     string    `json:"name"`
    Endpoint string    `json:"endpoint"`  // IP:Port
    IsLeader bool      `json:"is_leader"`
    IsOnline bool      `json:"is_online"`
    JoinedAt time.Time `json:"joined_at"`
}
```

### 3.2 æœ¬æœºèº«ä»½

é¦–æ¬¡ä½¿ç”¨å›¢é˜ŸåŠŸèƒ½æ—¶è®¾ç½®ï¼š

```go
// ~/.cocursor/team/identity.json
type Identity struct {
    ID        string    `json:"id"`         // UUIDï¼Œè‡ªåŠ¨ç”Ÿæˆ
    Name      string    `json:"name"`       // ç”¨æˆ·è®¾ç½®çš„åç§°
    CreatedAt time.Time `json:"created_at"`
    UpdatedAt time.Time `json:"updated_at"` // åç§°å¯ä¿®æ”¹
}
```

### 3.3 Leader èŒè´£

- ç»´æŠ¤å›¢é˜Ÿæˆå‘˜åˆ—è¡¨
- ç»´æŠ¤æŠ€èƒ½ç›®å½•ï¼ˆç´¢å¼•ï¼‰
- æ¥å—æˆå‘˜åŠ å…¥è¯·æ±‚
- é€šè¿‡ WebSocket å¹¿æ’­äº‹ä»¶
- å¼€å¯ mDNS å¹¿æ’­ä¾›å‘ç°

### 3.4 æˆå‘˜èƒ½åŠ›

- å‘å¸ƒæŠ€èƒ½åˆ°å›¢é˜Ÿï¼ˆé€šçŸ¥ Leader æ›´æ–°ç›®å½•ï¼‰
- æµè§ˆå›¢é˜ŸæŠ€èƒ½ç›®å½•
- ä»æŠ€èƒ½ä½œè€…å¤„ç›´æ¥ä¸‹è½½æ–‡ä»¶ï¼ˆP2Pï¼‰
- å®‰è£…/å¸è½½æŠ€èƒ½

### 3.5 é™åˆ¶

- ä¸€ä¸ª daemon åªèƒ½åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿï¼ˆä½œä¸º Leaderï¼‰
- å¯ä»¥åŒæ—¶åŠ å…¥å¤šä¸ªå›¢é˜Ÿï¼ˆä½œä¸ºæˆå‘˜ï¼‰
- Leader ä¸èƒ½ç¦»å¼€è‡ªå·±çš„å›¢é˜Ÿï¼Œåªèƒ½è§£æ•£
- ä»…æ”¯æŒå±€åŸŸç½‘ï¼Œä¸æ”¯æŒè·¨ç½‘ç»œ

---

## 4. ç½‘ç»œæ‹“æ‰‘

### 4.1 æ··åˆæ‹“æ‰‘è®¾è®¡

```
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ Leader â”‚  â† ç»´æŠ¤ç›®å½•ã€å¹¿æ’­äº‹ä»¶
                    â””â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”¼â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚        â”‚   â”‚   â”‚        â”‚   (WebSocket: äº‹ä»¶é€šçŸ¥)
           â–¼        â–¼   â–¼   â–¼        â–¼
        â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”
        â”‚ A  â”‚â—„â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â–ºâ”‚ D  â”‚   (HTTP: æ–‡ä»¶ä¼ è¾“)
        â””â”€â”€â”€â”€â”˜  â”‚ B  â”‚    â”‚ C  â”‚  â””â”€â”€â”€â”€â”˜
                â””â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”˜
```

- **æ§åˆ¶å±‚**ï¼šæˆå‘˜ â†WebSocketâ†’ Leaderï¼ˆäº‹ä»¶é€šçŸ¥ã€çŠ¶æ€åŒæ­¥ï¼‰
- **æ•°æ®å±‚**ï¼šæˆå‘˜ â†HTTPâ†’ æˆå‘˜ï¼ˆç›´æ¥ä¸‹è½½æ–‡ä»¶ï¼‰

### 4.2 ç«¯å£

å¤ç”¨ç°æœ‰ daemon ç«¯å£ï¼š**19960**

### 4.3 mDNS æœåŠ¡

```go
const ServiceType = "_cocursor._tcp"

type MDNSServiceInfo struct {
    InstanceName string // å›¢é˜Ÿåç§°
    Port         int    // 19960
    TxtRecords   map[string]string{
        "team_id":      "team_abc123",
        "leader_name":  "å¼ ä¸‰",
        "member_count": "5",
        "version":      "1.0.0",
    }
}
```

### 4.4 å¤šç½‘å¡å¤„ç†

ä¸€å°ä¸»æœºå¯èƒ½å­˜åœ¨å¤šä¸ªç½‘å¡ï¼ˆä»¥å¤ªç½‘ã€WiFiã€è™šæ‹Ÿæœºç½‘å¡ã€Docker ç½‘æ¡¥ç­‰ï¼‰ï¼Œéœ€è¦å¦¥å–„å¤„ç†ã€‚

#### 4.4.1 ç½‘å¡æšä¸¾ä¸è¿‡æ»¤

```go
// NetworkInterface ç½‘ç»œæ¥å£ä¿¡æ¯
type NetworkInterface struct {
    Name      string   `json:"name"`       // æ¥å£åç§°ï¼Œå¦‚ "en0", "eth0"
    Addresses []string `json:"addresses"`  // IPv4 åœ°å€åˆ—è¡¨
    IsUp      bool     `json:"is_up"`      // æ˜¯å¦å¯ç”¨
    IsLoopback bool    `json:"is_loopback"` // æ˜¯å¦å›ç¯
}

// è·å–å¯ç”¨çš„ç½‘ç»œæ¥å£
func GetAvailableInterfaces() ([]NetworkInterface, error) {
    interfaces, err := net.Interfaces()
    if err != nil {
        return nil, err
    }
    
    var result []NetworkInterface
    for _, iface := range interfaces {
        // è¿‡æ»¤æ¡ä»¶
        if iface.Flags&net.FlagUp == 0 {
            continue // è·³è¿‡æœªå¯ç”¨çš„æ¥å£
        }
        if iface.Flags&net.FlagLoopback != 0 {
            continue // è·³è¿‡å›ç¯æ¥å£
        }
        
        addrs, err := iface.Addrs()
        if err != nil {
            continue
        }
        
        var ipv4Addrs []string
        for _, addr := range addrs {
            if ipnet, ok := addr.(*net.IPNet); ok {
                if ip4 := ipnet.IP.To4(); ip4 != nil {
                    // è¿‡æ»¤ç‰¹æ®Šåœ°å€
                    if !isValidLANAddress(ip4) {
                        continue
                    }
                    ipv4Addrs = append(ipv4Addrs, ip4.String())
                }
            }
        }
        
        if len(ipv4Addrs) > 0 {
            result = append(result, NetworkInterface{
                Name:      iface.Name,
                Addresses: ipv4Addrs,
                IsUp:      true,
            })
        }
    }
    return result, nil
}

// åˆ¤æ–­æ˜¯å¦ä¸ºæœ‰æ•ˆçš„å±€åŸŸç½‘åœ°å€
func isValidLANAddress(ip net.IP) bool {
    // æ’é™¤å›ç¯åœ°å€
    if ip.IsLoopback() {
        return false
    }
    // æ’é™¤é“¾è·¯æœ¬åœ°åœ°å€ (169.254.x.x)
    if ip[0] == 169 && ip[1] == 254 {
        return false
    }
    // åªä¿ç•™ç§æœ‰åœ°å€æ®µ
    // 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16
    return ip.IsPrivate()
}
```

#### 4.4.2 Endpoint è®¾è®¡

è€ƒè™‘åˆ°å¤šç½‘å¡ï¼ŒEndpoint éœ€è¦æ”¯æŒå¤šåœ°å€ï¼š

```go
// MemberEndpoint æˆå‘˜ç«¯ç‚¹ï¼ˆæ”¯æŒå¤šåœ°å€ï¼‰
type MemberEndpoint struct {
    PrimaryIP   string   `json:"primary_ip"`   // ä¸»è¦ IPï¼ˆç”¨æˆ·é€‰æ‹©æˆ–è‡ªåŠ¨é€‰æ‹©ï¼‰
    AllIPs      []string `json:"all_ips"`      // æ‰€æœ‰å¯ç”¨ IP
    Port        int      `json:"port"`         // ç«¯å£
    PreferredIF string   `json:"preferred_if"` // é¦–é€‰ç½‘å¡åç§°ï¼ˆå¯é€‰ï¼‰
}

// è·å–å®Œæ•´çš„ç«¯ç‚¹åœ°å€
func (e *MemberEndpoint) GetAddress() string {
    return fmt.Sprintf("%s:%d", e.PrimaryIP, e.Port)
}

// è·å–æ‰€æœ‰å¯èƒ½çš„åœ°å€ï¼ˆç”¨äºè¿æ¥å°è¯•ï¼‰
func (e *MemberEndpoint) GetAllAddresses() []string {
    var addrs []string
    for _, ip := range e.AllIPs {
        addrs = append(addrs, fmt.Sprintf("%s:%d", ip, e.Port))
    }
    return addrs
}
```

#### 4.4.3 åˆ›å»ºå›¢é˜Ÿæ—¶çš„ç½‘å¡é€‰æ‹©

åˆ›å»ºå›¢é˜Ÿæ—¶ï¼Œå¦‚æœæ£€æµ‹åˆ°å¤šä¸ªç½‘å¡ï¼Œè®©ç”¨æˆ·é€‰æ‹©ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ åˆ›å»ºå›¢é˜Ÿ                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚ å›¢é˜Ÿåç§°: [åç«¯å¼€å‘ç»„___________]                                   â”‚
â”‚                                                                      â”‚
â”‚ æ£€æµ‹åˆ°å¤šä¸ªç½‘ç»œæ¥å£ï¼Œè¯·é€‰æ‹©ç”¨äºå›¢é˜Ÿé€šä¿¡çš„ç½‘ç»œ:                         â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â—‹ en0 (Wi-Fi)                                                   â”‚ â”‚
â”‚ â”‚   192.168.1.100                                                 â”‚ â”‚
â”‚ â”‚                                                                  â”‚ â”‚
â”‚ â”‚ â— en7 (USB Ethernet)                                            â”‚ â”‚
â”‚ â”‚   10.0.0.50                                                     â”‚ â”‚
â”‚ â”‚                                                                  â”‚ â”‚
â”‚ â”‚ â—‹ bridge0 (Docker)                                              â”‚ â”‚
â”‚ â”‚   172.17.0.1                                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ ğŸ’¡ è¯·é€‰æ‹©ä¸å›¢é˜Ÿæˆå‘˜åœ¨åŒä¸€ç½‘æ®µçš„ç½‘ç»œæ¥å£                               â”‚
â”‚                                                                      â”‚
â”‚                                          [å–æ¶ˆ] [åˆ›å»º]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4.4.4 åŠ å…¥å›¢é˜Ÿæ—¶çš„ç½‘å¡åŒ¹é…

åŠ å…¥å›¢é˜Ÿæ—¶ï¼Œè‡ªåŠ¨é€‰æ‹©ä¸ Leader åŒç½‘æ®µçš„ç½‘å¡ï¼š

```go
// é€‰æ‹©ä¸ç›®æ ‡åœ°å€åŒç½‘æ®µçš„æœ¬åœ° IP
func SelectMatchingLocalIP(targetIP string) (string, error) {
    target := net.ParseIP(targetIP)
    if target == nil {
        return "", fmt.Errorf("invalid target IP: %s", targetIP)
    }
    
    interfaces, err := GetAvailableInterfaces()
    if err != nil {
        return "", err
    }
    
    for _, iface := range interfaces {
        for _, addr := range iface.Addresses {
            localIP := net.ParseIP(addr)
            // ç®€å•åˆ¤æ–­ï¼šå‰ä¸‰æ®µç›¸åŒè§†ä¸ºåŒç½‘æ®µï¼ˆé€‚ç”¨äº /24ï¼‰
            // æ›´ç²¾ç¡®çš„åšæ³•éœ€è¦è€ƒè™‘å­ç½‘æ©ç 
            if isSameSubnet(localIP, target) {
                return addr, nil
            }
        }
    }
    
    // æ²¡æœ‰åŒ¹é…çš„ç½‘æ®µï¼Œè¿”å›ç¬¬ä¸€ä¸ªå¯ç”¨åœ°å€
    if len(interfaces) > 0 && len(interfaces[0].Addresses) > 0 {
        return interfaces[0].Addresses[0], nil
    }
    
    return "", fmt.Errorf("no suitable network interface found")
}

// åˆ¤æ–­æ˜¯å¦åŒç½‘æ®µï¼ˆç®€åŒ–ç‰ˆï¼Œå‡è®¾ /24ï¼‰
func isSameSubnet(a, b net.IP) bool {
    a4 := a.To4()
    b4 := b.To4()
    if a4 == nil || b4 == nil {
        return false
    }
    // æ¯”è¾ƒå‰ 3 ä¸ªå­—èŠ‚
    return a4[0] == b4[0] && a4[1] == b4[1] && a4[2] == b4[2]
}
```

#### 4.4.5 è¿æ¥å¤±è´¥æ—¶çš„åœ°å€å›é€€

å½“ä¸»è¦åœ°å€è¿æ¥å¤±è´¥æ—¶ï¼Œå°è¯•å…¶ä»–åœ°å€ï¼š

```go
// å°è¯•è¿æ¥æˆå‘˜ï¼Œæ”¯æŒå¤šåœ°å€å›é€€
func ConnectToMember(endpoint MemberEndpoint, timeout time.Duration) (net.Conn, error) {
    addresses := endpoint.GetAllAddresses()
    
    var lastErr error
    for _, addr := range addresses {
        conn, err := net.DialTimeout("tcp", addr, timeout)
        if err == nil {
            return conn, nil
        }
        lastErr = err
        log.Debug("Connection failed", "address", addr, "error", err)
    }
    
    return nil, fmt.Errorf("all addresses failed, last error: %w", lastErr)
}
```

#### 4.4.6 mDNS å¤šç½‘å¡å¹¿æ’­

mDNS éœ€è¦åœ¨æ‰€æœ‰æœ‰æ•ˆç½‘å¡ä¸Šå¹¿æ’­ï¼š

```go
// åœ¨æ‰€æœ‰ç½‘å¡ä¸Šå¯åŠ¨ mDNS æœåŠ¡
func StartMDNSOnAllInterfaces(service MDNSServiceInfo) error {
    interfaces, err := GetAvailableInterfaces()
    if err != nil {
        return err
    }
    
    for _, iface := range interfaces {
        for _, addr := range iface.Addresses {
            // åœ¨æ¯ä¸ªæ¥å£ä¸Šå¯åŠ¨ mDNS
            if err := startMDNSOnInterface(iface.Name, addr, service); err != nil {
                log.Warn("Failed to start mDNS on interface", 
                    "interface", iface.Name, 
                    "address", addr, 
                    "error", err)
                // ç»§ç»­å°è¯•å…¶ä»–æ¥å£
            }
        }
    }
    
    return nil
}
```

#### 4.4.7 é…ç½®æŒä¹…åŒ–

ç”¨æˆ·é€‰æ‹©çš„ç½‘å¡åå¥½ä¿å­˜åˆ°é…ç½®ï¼š

```go
// ~/.cocursor/team/network.json
type NetworkConfig struct {
    PreferredInterface string `json:"preferred_interface"` // é¦–é€‰ç½‘å¡åç§°
    PreferredIP        string `json:"preferred_ip"`        // é¦–é€‰ IP
    LastUpdated        time.Time `json:"last_updated"`
}
```

#### 4.4.8 ç½‘å¡å˜åŒ–æ£€æµ‹

ç›‘å¬ç½‘å¡å˜åŒ–ï¼ˆIP å˜æ›´ã€ç½‘å¡æ–­å¼€ç­‰ï¼‰ï¼š

```go
// NetworkChangeEvent ç½‘å¡å˜åŒ–äº‹ä»¶
type NetworkChangeEvent struct {
    Type      string // "added", "removed", "changed"
    Interface string
    OldIP     string
    NewIP     string
}

// å½“æ£€æµ‹åˆ°ç½‘å¡å˜åŒ–æ—¶ï¼š
// 1. å¦‚æœæ˜¯ Leaderï¼Œæ›´æ–° mDNS å¹¿æ’­
// 2. é€šçŸ¥å·²è¿æ¥çš„æˆå‘˜æ–°çš„ç«¯ç‚¹ä¿¡æ¯
// 3. UI æç¤ºç”¨æˆ·ç½‘ç»œå˜åŒ–
```

---

## 5. è¿æ¥ç®¡ç†

### 5.1 WebSocket è¿æ¥

æ¯ä¸ªæˆå‘˜ä¸ Leader å»ºç«‹ WebSocket è¿æ¥ï¼š

```
è¿æ¥åœ°å€: ws://{leader_endpoint}/team/{team_id}/ws
```

**è®¤è¯æ–¹å¼**ï¼šè¿æ¥åå‘é€ member_idï¼ŒLeader æ ¡éªŒæ˜¯å¦åœ¨æˆå‘˜åˆ—è¡¨ä¸­

**å¿ƒè·³æœºåˆ¶**ï¼š
- å¿ƒè·³é—´éš”ï¼š30 ç§’
- è¶…æ—¶åˆ¤å®šï¼š60 ç§’æ— å¿ƒè·³è§†ä¸ºç¦»çº¿

**æ–­å¼€é‡è¿**ï¼š
- è‡ªåŠ¨é‡è¿ï¼ŒæŒ‡æ•°é€€é¿ï¼ˆ1s, 2s, 4s, 8s, max 30sï¼‰
- é‡è¿æœŸé—´ä½¿ç”¨æœ¬åœ°ç¼“å­˜

### 5.2 WebSocket äº‹ä»¶

```go
type EventType string

const (
    EventSkillPublished EventType = "skill_published"
    EventSkillUpdated   EventType = "skill_updated"
    EventSkillDeleted   EventType = "skill_deleted"
    EventMemberJoined   EventType = "member_joined"
    EventMemberLeft     EventType = "member_left"
    EventMemberOnline   EventType = "member_online"
    EventMemberOffline  EventType = "member_offline"
)

type TeamEvent struct {
    Type      EventType       `json:"type"`
    TeamID    string          `json:"team_id"`
    Timestamp time.Time       `json:"timestamp"`
    Payload   json.RawMessage `json:"payload"`
}
```

### 5.3 æˆå‘˜åœ¨çº¿çŠ¶æ€

é€šè¿‡ WebSocket è¿æ¥çŠ¶æ€åˆ¤å®šï¼š
- å·²è¿æ¥ = åœ¨çº¿
- æ–­å¼€ = ç¦»çº¿

---

## 6. å›¢é˜Ÿå‘ç°ä¸åŠ å…¥

### 6.1 å‘ç°æ–¹å¼

**æ–¹å¼ä¸€ï¼šmDNS å±€åŸŸç½‘è‡ªåŠ¨å‘ç°**
- æ‰«æ `_cocursor._tcp` æœåŠ¡
- æ˜¾ç¤ºå¯ç”¨å›¢é˜Ÿåˆ—è¡¨

**æ–¹å¼äºŒï¼šæ‰‹åŠ¨è¾“å…¥ IP:Port**
- ç”¨æˆ·è¾“å…¥ Leader åœ°å€
- å‘é€åŠ å…¥è¯·æ±‚

### 6.2 åŠ å…¥æµç¨‹

```
æˆå‘˜                           Leader
  â”‚                              â”‚
  â”‚â”€â”€ POST /team/{id}/join â”€â”€â”€â”€â–ºâ”‚
  â”‚   {member_id, member_name,  â”‚
  â”‚    endpoint}                 â”‚
  â”‚                              â”‚
  â”‚   â—„â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚   {team info, members,      â”‚
  â”‚    skill_index}             â”‚
  â”‚                              â”‚
  â”‚â”€â”€ WebSocket connect â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚                              â”‚
  â”‚   â—„â”€â”€ welcome event â”€â”€â”€â”€â”€â”€â”€â”€â”‚
```

**æ— éœ€ Leader æ‰¹å‡†**ï¼šçŸ¥é“åœ°å€å³å¯åŠ å…¥

### 6.3 åˆ›å»ºå›¢é˜Ÿ

```
ç”¨æˆ·                           ç³»ç»Ÿ
  â”‚                              â”‚
  â”‚â”€â”€ åˆ›å»ºå›¢é˜Ÿ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
  â”‚   {team_name}                â”‚
  â”‚                              â”‚
  â”‚                              â”‚â”€â”€ ç”Ÿæˆ team_id
  â”‚                              â”‚â”€â”€ å¯åŠ¨ WebSocket æœåŠ¡ç«¯
  â”‚                              â”‚â”€â”€ å¼€å¯ mDNS å¹¿æ’­
  â”‚                              â”‚
  â”‚   â—„â”€â”€ è¿”å›å›¢é˜Ÿä¿¡æ¯ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
  â”‚   {team_id, endpoint}        â”‚
```

---

## 7. æŠ€èƒ½å‘å¸ƒ

### 7.1 å‘å¸ƒæ¥æº

ç”¨æˆ·é€‰æ‹©æœ¬åœ°ç›®å½•è¿›è¡Œå‘å¸ƒï¼Œé€šè¿‡ VSCode åŸç”Ÿæ–‡ä»¶å¯¹è¯æ¡†é€‰æ‹©ã€‚

### 7.2 ç›®å½•éªŒè¯

```go
func ValidateSkillDirectory(path string) (*SkillInfo, error) {
    // å¿…é¡»å­˜åœ¨ SKILL.md
    skillMDPath := filepath.Join(path, "SKILL.md")
    if _, err := os.Stat(skillMDPath); os.IsNotExist(err) {
        return nil, fmt.Errorf("missing SKILL.md")
    }
    
    // è§£æ frontmatter è·å–å…ƒæ•°æ®
    content, _ := os.ReadFile(skillMDPath)
    metadata, err := ParseSkillFrontmatter(content)
    
    // ç‰ˆæœ¬å·ä» SKILL.md frontmatter è¯»å–ï¼Œé»˜è®¤ 1.0.0
    version := metadata.Version
    if version == "" {
        version = "1.0.0"
    }
    
    return &SkillInfo{
        Name:        metadata.Name,
        Description: metadata.Description,
        Version:     version,
        Files:       collectFiles(path),
    }, nil
}
```

### 7.3 å‘å¸ƒæµç¨‹

```
ä½œè€…                           Leader                    å…¶ä»–æˆå‘˜
  â”‚                              â”‚                          â”‚
  â”‚â”€â”€ POST /team/{id}/skills â”€â”€â–ºâ”‚                          â”‚
  â”‚   {plugin_id, name, desc,   â”‚                          â”‚
  â”‚    version, endpoint, ...}  â”‚                          â”‚
  â”‚                              â”‚                          â”‚
  â”‚                              â”‚â”€â”€ æ›´æ–° skill-index.json  â”‚
  â”‚                              â”‚                          â”‚
  â”‚   â—„â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
  â”‚                              â”‚                          â”‚
  â”‚                              â”‚â”€â”€ WebSocket broadcast â”€â”€â–ºâ”‚
  â”‚                              â”‚   {type: skill_published}â”‚
  â”‚                              â”‚                          â”‚
  â”‚                              â”‚                          â”‚â”€â”€ æ›´æ–°æœ¬åœ°ç¼“å­˜
  â”‚                              â”‚                          â”‚â”€â”€ åˆ·æ–° UI
```

**æ–‡ä»¶å­˜å‚¨**ï¼šæ–‡ä»¶ä¿ç•™åœ¨ä½œè€…æœ¬åœ°ï¼ŒLeader åªå­˜å‚¨å…ƒæ•°æ®ç´¢å¼•

### 7.4 ç‰ˆæœ¬æ›´æ–°

è¦†ç›–å¼æ›´æ–°ï¼šç›´æ¥è¦†ç›–ï¼Œåªä¿ç•™æœ€æ–°ç‰ˆæœ¬

---

## 8. æŠ€èƒ½ä¸‹è½½ä¸å®‰è£…

### 8.1 çŠ¶æ€æµè½¬

```
[æœªçŸ¥] â†’ [å¯è§] â†’ [å·²ä¸‹è½½] â†’ [å·²å®‰è£…]
           â”‚         â”‚           â”‚
           â”‚         â”‚           â””â”€â”€ å¸è½½ â†’ [å·²ä¸‹è½½]
           â”‚         â””â”€â”€ åˆ é™¤æœ¬åœ° â†’ [å¯è§]
           â””â”€â”€ ä½œè€…ç¦»çº¿æ—¶æ— æ³•ä¸‹è½½
```

### 8.2 ä¸‹è½½æµç¨‹

```
ä¸‹è½½è€…                          ä½œè€…
  â”‚                              â”‚
  â”‚â”€â”€ GET /p2p/skills/{id}/meta â”€â–º
  â”‚   â—„â”€â”€ {name, version, checksum, files} â”€â”€â”‚
  â”‚                              â”‚
  â”‚â”€â”€ GET /p2p/skills/{id}/download â”€â–º
  â”‚   â—„â”€â”€ {files as tar.gz} â”€â”€â”€â”€â”‚
  â”‚                              â”‚
  â”‚â”€â”€ æ ¡éªŒ checksum              â”‚
  â”‚â”€â”€ è§£å‹åˆ°æœ¬åœ°ç›®å½•             â”‚
      ~/.cocursor/team-skills/{team-id}/{plugin-id}/
```

**ä½œè€…ç¦»çº¿æ—¶æ— æ³•ä¸‹è½½**ï¼šæ˜¾ç¤ºæç¤ºï¼Œç­‰å¾…ä½œè€…ä¸Šçº¿

### 8.3 å®‰è£…æµç¨‹

ä»æœ¬åœ°ä¸‹è½½ç›®å½•å®‰è£…åˆ° Claude skillsï¼š

```
æº: ~/.cocursor/team-skills/{team-id}/{plugin-id}/
ç›®æ ‡: ~/.claude/skills/{team-id}-{plugin-id}/
```

åŒæ—¶æ›´æ–°å·¥ä½œåŒº AGENTS.mdï¼ˆå¢åŠ æ¥æºæ ‡ç­¾ï¼‰ï¼š

```xml
<skill>
<name>go-lint</name>
<description>Go ä»£ç è§„èŒƒæ£€æŸ¥</description>
<location>global</location>
<source>team_global</source>
<team>åç«¯å¼€å‘ç»„</team>
</skill>
```

---

## 9. Leader ç¦»çº¿å¤„ç†

### 9.1 é™çº§æ¨¡å¼

å½“ Leader ç¦»çº¿æ—¶ï¼š

| åŠŸèƒ½ | çŠ¶æ€ |
|------|------|
| ä½¿ç”¨å·²ä¸‹è½½çš„æŠ€èƒ½ | âœ… å¯ç”¨ |
| æµè§ˆç¼“å­˜çš„æŠ€èƒ½ç›®å½• | âœ… å¯ç”¨ |
| ä»å…¶ä»–åœ¨çº¿æˆå‘˜ä¸‹è½½ï¼ˆå·²çŸ¥ç«¯ç‚¹ï¼‰ | âœ… å¯ç”¨ |
| å‘å¸ƒæ–°æŠ€èƒ½åˆ°å›¢é˜Ÿ | âŒ ä¸å¯ç”¨ |
| çœ‹åˆ°æœ€æ–°çš„æŠ€èƒ½æ›´æ–° | âŒ ä¸å¯ç”¨ |
| æ–°æˆå‘˜åŠ å…¥ | âŒ ä¸å¯ç”¨ |

### 9.2 UI æç¤º

```
âš ï¸ å›¢é˜Ÿ "åç«¯ç»„" çš„ Leader å½“å‰ç¦»çº¿
   æŠ€èƒ½ç›®å½•å¯èƒ½ä¸æ˜¯æœ€æ–°ï¼Œå‘å¸ƒåŠŸèƒ½æš‚ä¸å¯ç”¨
   æœ€ååŒæ­¥: 2 å°æ—¶å‰
```

### 9.3 æœ¬åœ°ç¼“å­˜

æ¯ä¸ªæˆå‘˜ç¼“å­˜æŠ€èƒ½ç›®å½•ï¼š

```
~/.cocursor/team/{team-id}/skill-index.json
```

---

## 10. æŠ€èƒ½åˆ é™¤

### 10.1 åˆ é™¤ç­–ç•¥

ä»…ä» Leader ç›®å½•ä¸­ç§»é™¤ï¼Œå·²ä¸‹è½½çš„æˆå‘˜ä»å¯ä½¿ç”¨æœ¬åœ°å‰¯æœ¬ã€‚

### 10.2 åˆ é™¤æµç¨‹

```
ä½œè€…                           Leader                    å…¶ä»–æˆå‘˜
  â”‚                              â”‚                          â”‚
  â”‚â”€â”€ DELETE /team/{id}/skills/{skill_id} â”€â–º               â”‚
  â”‚                              â”‚                          â”‚
  â”‚                              â”‚â”€â”€ ä» skill-index ç§»é™¤    â”‚
  â”‚                              â”‚                          â”‚
  â”‚   â—„â”€â”€ 200 OK â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚                          â”‚
  â”‚                              â”‚                          â”‚
  â”‚                              â”‚â”€â”€ WebSocket broadcast â”€â”€â–ºâ”‚
  â”‚                              â”‚   {type: skill_deleted}  â”‚
```

---

## 11. å­˜å‚¨ç»“æ„

### 11.1 å…¨å±€é…ç½®

```
~/.cocursor/
â”œâ”€â”€ config.json                      # å…¨å±€é…ç½®
â”œâ”€â”€ plugins-state.json               # æ’ä»¶å®‰è£…çŠ¶æ€ï¼ˆæ‰©å±•ï¼‰
â”œâ”€â”€ team/
â”‚   â”œâ”€â”€ identity.json                # æœ¬æœºèº«ä»½
â”‚   â”œâ”€â”€ teams.json                   # å·²åŠ å…¥çš„å›¢é˜Ÿåˆ—è¡¨
â”‚   â””â”€â”€ {team-id}/
â”‚       â”œâ”€â”€ info.json                # å›¢é˜Ÿä¿¡æ¯
â”‚       â”œâ”€â”€ members.json             # æˆå‘˜åˆ—è¡¨ï¼ˆLeader ç»´æŠ¤ï¼‰
â”‚       â””â”€â”€ skill-index.json         # æŠ€èƒ½ç›®å½•ï¼ˆä» Leader åŒæ­¥ï¼‰
â”‚
â””â”€â”€ team-skills/                     # å›¢é˜Ÿå…¨å±€æŠ€èƒ½ï¼ˆå·²ä¸‹è½½ï¼‰
    â””â”€â”€ {team-id}/
        â””â”€â”€ {plugin-id}/
            â”œâ”€â”€ plugin.json
            â””â”€â”€ skill/
                â”œâ”€â”€ SKILL.md
                â””â”€â”€ ...
```

### 11.2 é¡¹ç›®é…ç½®

```
{project}/
â””â”€â”€ .cocursor/
    â”œâ”€â”€ skills/                      # é¡¹ç›®æŠ€èƒ½
    â”‚   â””â”€â”€ {skill-id}/
    â”‚       â””â”€â”€ ...
    â””â”€â”€ team-skills/                 # å›¢é˜Ÿé¡¹ç›®çº§æŠ€èƒ½
        â””â”€â”€ {skill-id}/
            â””â”€â”€ ...
```

### 11.3 æ‰©å±•çš„ plugins-state.json

```json
{
  "installed_plugins": {
    "code-review": {
      "version": "1.0.0",
      "installed_at": "2026-01-20T10:00:00Z"
    }
  },
  "team_plugins": {
    "team_abc123:go-lint": {
      "version": "1.0.0",
      "installed_at": "2026-01-20T11:00:00Z",
      "team_id": "team_abc123",
      "source": "team_global"
    }
  }
}
```

---

## 12. æ•°æ®æ¨¡å‹

### 12.1 æ‰©å±•çš„ Plugin æ¨¡å‹

```go
type PluginSource string

const (
    SourceBuiltin     PluginSource = "builtin"
    SourceProject     PluginSource = "project"
    SourceTeamGlobal  PluginSource = "team_global"
    SourceTeamProject PluginSource = "team_project"
)

type Plugin struct {
    // ç°æœ‰å­—æ®µ
    ID               string       `json:"id"`
    Name             string       `json:"name"`
    Description      string       `json:"description"`
    Author           string       `json:"author"`
    Version          string       `json:"version"`
    Category         string       `json:"category"`
    Installed        bool         `json:"installed"`
    InstalledVersion string       `json:"installed_version,omitempty"`
    Skill            SkillComponent    `json:"skill"`
    MCP              *MCPComponent     `json:"mcp,omitempty"`
    Command          *CommandComponent `json:"command,omitempty"`
    
    // æ–°å¢å­—æ®µ
    Source         PluginSource `json:"source"`
    FullID         string       `json:"full_id,omitempty"`          // å”¯ä¸€æ ‡è¯†
    TeamID         string       `json:"team_id,omitempty"`          // æ‰€å±å›¢é˜Ÿ
    AuthorID       string       `json:"author_id,omitempty"`        // ä½œè€… ID
    AuthorName     string       `json:"author_name,omitempty"`      // ä½œè€…åç§°
    AuthorEndpoint string       `json:"author_endpoint,omitempty"`  // ä½œè€…åœ°å€
    PublishedAt    *time.Time   `json:"published_at,omitempty"`     // å‘å¸ƒæ—¶é—´
    IsDownloaded   bool         `json:"is_downloaded"`              // æ˜¯å¦å·²ä¸‹è½½
    DownloadedAt   *time.Time   `json:"downloaded_at,omitempty"`    // ä¸‹è½½æ—¶é—´
}
```

### 12.2 å›¢é˜ŸæŠ€èƒ½ç›®å½•

```go
type TeamSkillIndex struct {
    TeamID    string           `json:"team_id"`
    UpdatedAt time.Time        `json:"updated_at"`
    Skills    []TeamSkillEntry `json:"skills"`
}

type TeamSkillEntry struct {
    PluginID       string    `json:"plugin_id"`
    Name           string    `json:"name"`
    Description    string    `json:"description"`
    Version        string    `json:"version"`
    AuthorID       string    `json:"author_id"`
    AuthorName     string    `json:"author_name"`
    AuthorEndpoint string    `json:"author_endpoint"`
    PublishedAt    time.Time `json:"published_at"`
    FileCount      int       `json:"file_count"`
    TotalSize      int64     `json:"total_size"`
    Checksum       string    `json:"checksum"`
}
```

---

## 13. API è®¾è®¡

### 13.1 å›¢é˜Ÿç®¡ç† API

```yaml
# åˆ›å»ºå›¢é˜Ÿ
POST /api/v1/team/create
Request:
  { "name": "åç«¯å¼€å‘ç»„" }
Response:
  {
    "team_id": "team_abc123",
    "name": "åç«¯å¼€å‘ç»„",
    "endpoint": "192.168.1.100:19960"
  }

# å‘ç°å±€åŸŸç½‘å›¢é˜Ÿ
GET /api/v1/team/discover
Response:
  {
    "teams": [
      {
        "team_id": "team_abc123",
        "name": "åç«¯å¼€å‘ç»„",
        "leader_name": "å¼ ä¸‰",
        "endpoint": "192.168.1.100:19960",
        "member_count": 5
      }
    ]
  }

# åŠ å…¥å›¢é˜Ÿ
POST /api/v1/team/join
Request:
  { "endpoint": "192.168.1.100:19960" }
Response:
  {
    "team_id": "team_abc123",
    "name": "åç«¯å¼€å‘ç»„",
    "joined": true
  }

# è·å–å·²åŠ å…¥çš„å›¢é˜Ÿåˆ—è¡¨
GET /api/v1/team/list
Response:
  {
    "teams": [
      {
        "team_id": "team_abc123",
        "name": "åç«¯å¼€å‘ç»„",
        "is_leader": false,
        "leader_online": true,
        "last_sync": "2026-01-20T10:00:00Z"
      }
    ]
  }

# è·å–å›¢é˜Ÿæˆå‘˜
GET /api/v1/team/:team_id/members
Response:
  {
    "members": [
      { "id": "member_001", "name": "å¼ ä¸‰", "is_leader": true, "is_online": true }
    ]
  }

# ç¦»å¼€å›¢é˜Ÿ
POST /api/v1/team/:team_id/leave

# è§£æ•£å›¢é˜Ÿï¼ˆä»… Leaderï¼‰
POST /api/v1/team/:team_id/dissolve
```

### 13.2 å›¢é˜ŸæŠ€èƒ½ API

```yaml
# è·å–æŠ€èƒ½åˆ—è¡¨ï¼ˆæ‰©å±•ç°æœ‰ APIï¼‰
GET /api/v1/marketplace/plugins?source=team_global&team_id=xxx
Response:
  {
    "plugins": [
      {
        "id": "go-lint",
        "name": "Go ä»£ç è§„èŒƒæ£€æŸ¥",
        "source": "team_global",
        "team_id": "team_abc123",
        "author_name": "æå››",
        "is_downloaded": false,
        "author_endpoint": "192.168.1.101:19960"
      }
    ]
  }

# éªŒè¯æŠ€èƒ½ç›®å½•
POST /api/v1/team/skills/validate
Request:
  { "path": "/Users/xxx/my-skills/go-lint" }
Response:
  {
    "valid": true,
    "skill_info": {
      "name": "go-lint",
      "description": "Go ä»£ç è§„èŒƒæ£€æŸ¥",
      "version": "1.0.0",
      "files": ["SKILL.md", "scripts/lint.sh"],
      "total_size": 8600
    }
  }

# å‘å¸ƒæŠ€èƒ½åˆ°å›¢é˜Ÿ
POST /api/v1/team/:team_id/skills/publish
Request:
  { "path": "/Users/xxx/my-skills/go-lint" }
Response:
  {
    "success": true,
    "plugin_id": "go-lint",
    "published_at": "2026-01-20T10:00:00Z"
  }

# ä¸‹è½½å›¢é˜ŸæŠ€èƒ½
POST /api/v1/team/skills/:skill_id/download
Request:
  {
    "team_id": "team_abc123",
    "author_endpoint": "192.168.1.101:19960"
  }
Response:
  {
    "success": true,
    "downloaded_to": "~/.cocursor/team-skills/team_abc123/go-lint"
  }

# åˆ é™¤å·²å‘å¸ƒçš„æŠ€èƒ½ï¼ˆä»…ä½œè€…ï¼‰
DELETE /api/v1/team/:team_id/skills/:skill_id
```

### 13.3 P2P æ¥å£ï¼ˆæ¯ä¸ª daemon æš´éœ²ï¼‰

```yaml
# Leader ä¸“å±
POST   /team/:team_id/join           # å¤„ç†åŠ å…¥è¯·æ±‚
GET    /team/:team_id/info           # å›¢é˜Ÿä¿¡æ¯
GET    /team/:team_id/members        # æˆå‘˜åˆ—è¡¨
GET    /team/:team_id/skills         # æŠ€èƒ½ç›®å½•
POST   /team/:team_id/skills         # å‘å¸ƒæŠ€èƒ½ï¼ˆæ›´æ–°ç›®å½•ï¼‰
DELETE /team/:team_id/skills/:id     # åˆ é™¤æŠ€èƒ½
WS     /team/:team_id/ws             # WebSocket è¿æ¥

# æ‰€æœ‰æˆå‘˜
GET    /p2p/skills/:skill_id/meta     # æŠ€èƒ½å…ƒæ•°æ®
GET    /p2p/skills/:skill_id/download # ä¸‹è½½æŠ€èƒ½æ–‡ä»¶
GET    /p2p/health                    # å¥åº·æ£€æŸ¥
```

---

## 14. UI è®¾è®¡

### 14.1 æŠ€èƒ½å¸‚åœºæ”¹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æŠ€èƒ½å¸‚åœº                                              [+ å‘å¸ƒæŠ€èƒ½]  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚ æ¥æº: [å…¨éƒ¨ â–¼]  å›¢é˜Ÿ: [å…¨éƒ¨ â–¼]  åˆ†ç±»: [å…¨éƒ¨ â–¼]  [ğŸ” æœç´¢...]        â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âš ï¸ å›¢é˜Ÿ "åç«¯ç»„" æœ‰ 2 ä¸ªæ–°æŠ€èƒ½å¯ç”¨                               â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“¦ Go ä»£ç è§„èŒƒæ£€æŸ¥                                   [â¬‡ï¸ ä¸‹è½½]  â”‚ â”‚
â”‚ â”‚    ğŸ·ï¸ å›¢é˜Ÿå…¨å±€ Â· ğŸ‘¤ æå›› Â· ğŸ• 30åˆ†é’Ÿå‰ Â· ä½œè€…åœ¨çº¿ ğŸŸ¢             â”‚ â”‚
â”‚ â”‚    æ ‡å‡†åŒ–å›¢é˜Ÿ Go ä»£ç é£æ ¼æ£€æŸ¥                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“¦ API æ–‡æ¡£ç”Ÿæˆå™¨                                    [ğŸ“¥ å®‰è£…]  â”‚ â”‚
â”‚ â”‚    ğŸ·ï¸ å›¢é˜Ÿå…¨å±€ Â· ğŸ‘¤ ç‹äº” Â· âœ… å·²ä¸‹è½½                            â”‚ â”‚
â”‚ â”‚    è‡ªåŠ¨ç”Ÿæˆ OpenAPI æ–‡æ¡£                                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“¦ ä»£ç å®¡æŸ¥åŠ©æ‰‹                                      [å·²å®‰è£… âœ“] â”‚ â”‚
â”‚ â”‚    ğŸ·ï¸ å†…å»º Â· v1.0.0                                             â”‚ â”‚
â”‚ â”‚    AI é©±åŠ¨çš„ä»£ç å®¡æŸ¥                                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 14.2 å‘å¸ƒæŠ€èƒ½å¼¹çª—

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å‘å¸ƒæŠ€èƒ½åˆ°å›¢é˜Ÿ                                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚ æŠ€èƒ½ç›®å½•: [____________________________________] [æµè§ˆ...]          â”‚
â”‚           /Users/zhangsan/my-skills/go-lint                         â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ âœ… æ£€æµ‹åˆ°æœ‰æ•ˆçš„æŠ€èƒ½ç›®å½•                                          â”‚ â”‚
â”‚ â”‚                                                                  â”‚ â”‚
â”‚ â”‚ åç§°: go-lint                                                    â”‚ â”‚
â”‚ â”‚ æè¿°: Go ä»£ç è§„èŒƒæ£€æŸ¥å·¥å…·                                        â”‚ â”‚
â”‚ â”‚ ç‰ˆæœ¬: 1.0.0                                                      â”‚ â”‚
â”‚ â”‚                                                                  â”‚ â”‚
â”‚ â”‚ åŒ…å«æ–‡ä»¶:                                                        â”‚ â”‚
â”‚ â”‚   - SKILL.md (2.3 KB)                                           â”‚ â”‚
â”‚ â”‚   - scripts/lint.sh (1.1 KB)                                    â”‚ â”‚
â”‚ â”‚   å…± 2 ä¸ªæ–‡ä»¶ï¼Œ3.4 KB                                           â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ å‘å¸ƒåˆ°å›¢é˜Ÿ: [åç«¯å¼€å‘ç»„ â–¼]                                          â”‚
â”‚                                                                      â”‚
â”‚                                          [å–æ¶ˆ] [ç¡®è®¤å‘å¸ƒ]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 14.3 å›¢é˜Ÿç®¡ç†é¡µé¢

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ å›¢é˜Ÿç®¡ç†                                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚ æˆ‘çš„å›¢é˜Ÿ                                          [+ åˆ›å»ºå›¢é˜Ÿ]      â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€                                          [ğŸ” å‘ç°å›¢é˜Ÿ]     â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŸ¢ åç«¯å¼€å‘ç»„                                      [æˆ‘æ˜¯ Leader] â”‚ â”‚
â”‚ â”‚    æˆå‘˜: 5 äººåœ¨çº¿ Â· æŠ€èƒ½: 8 ä¸ª                                   â”‚ â”‚
â”‚ â”‚    åœ°å€: 192.168.1.100:19960                                    â”‚ â”‚
â”‚ â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚ â”‚
â”‚ â”‚    [æŸ¥çœ‹æˆå‘˜]  [æŸ¥çœ‹æŠ€èƒ½]  [è§£æ•£å›¢é˜Ÿ]                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸŸ¢ å‰ç«¯å¼€å‘ç»„                                                    â”‚ â”‚
â”‚ â”‚    Leader: èµµå…­ (åœ¨çº¿) Â· æˆå‘˜: 3 äºº                              â”‚ â”‚
â”‚ â”‚    æœ€ååŒæ­¥: 5 åˆ†é’Ÿå‰                                            â”‚ â”‚
â”‚ â”‚    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚ â”‚
â”‚ â”‚    [æŸ¥çœ‹æˆå‘˜]  [æŸ¥çœ‹æŠ€èƒ½]  [ç¦»å¼€å›¢é˜Ÿ]                            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ â• æ‰‹åŠ¨åŠ å…¥å›¢é˜Ÿ                                                  â”‚ â”‚
â”‚ â”‚    è¾“å…¥ Leader IP:Port: [________________] [åŠ å…¥]                â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ğŸ“¡ å±€åŸŸç½‘å‘ç°çš„å›¢é˜Ÿ                              [åˆ·æ–°]          â”‚ â”‚
â”‚ â”‚                                                                  â”‚ â”‚
â”‚ â”‚    ğŸ”µ æµ‹è¯•ç»„ (192.168.1.108:19960)              [ç”³è¯·åŠ å…¥]      â”‚ â”‚
â”‚ â”‚       Leader: å­™ä¸ƒ Â· 2 äººåœ¨çº¿                                    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 14.4 é¦–æ¬¡ä½¿ç”¨è®¾ç½®

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ¬¢è¿ä½¿ç”¨å›¢é˜ŸåŠŸèƒ½                                                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                      â”‚
â”‚ è¯·è®¾ç½®ä½ åœ¨å›¢é˜Ÿä¸­æ˜¾ç¤ºçš„åç§°:                                          â”‚
â”‚                                                                      â”‚
â”‚ [________________________]                                          â”‚
â”‚                                                                      â”‚
â”‚ ğŸ’¡ å…¶ä»–å›¢é˜Ÿæˆå‘˜å°†çœ‹åˆ°è¿™ä¸ªåç§°                                        â”‚
â”‚    ä½ å¯ä»¥éšæ—¶åœ¨è®¾ç½®ä¸­ä¿®æ”¹                                            â”‚
â”‚                                                                      â”‚
â”‚                                                     [ç¡®å®š]          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 15. å®ç°é˜¶æ®µ

### Phase 1: é¢†åŸŸæ¨¡å‹ä¸æ•°æ®ç»“æ„
- æ‰©å±• `domain/marketplace/models.go`ï¼ˆæ·»åŠ  Source ç›¸å…³å­—æ®µï¼‰
- æ–°å¢ `domain/team/models.go`ï¼ˆTeam, Member, Identityï¼‰
- æ–°å¢ `domain/p2p/events.go`ï¼ˆäº‹ä»¶ç±»å‹å®šä¹‰ï¼‰

### Phase 2: P2P åŸºç¡€è®¾æ–½
- æ–°å¢ `infrastructure/p2p/mdns_discovery.go`ï¼ˆmDNS å‘ç°ï¼‰
- æ–°å¢ `infrastructure/p2p/http_server.go`ï¼ˆP2P HTTP æœåŠ¡ï¼‰
- æ–°å¢ `infrastructure/p2p/websocket.go`ï¼ˆWebSocket æœåŠ¡ç«¯/å®¢æˆ·ç«¯ï¼‰
- æ–°å¢ `infrastructure/p2p/file_transfer.go`ï¼ˆæ–‡ä»¶ä¼ è¾“ï¼‰

### Phase 3: å›¢é˜Ÿåˆ›å»ºä¸åŠ å…¥
- æ–°å¢ `application/team/service.go`ï¼ˆå›¢é˜ŸæœåŠ¡ï¼‰
- æ–°å¢ `infrastructure/team/manager.go`ï¼ˆå›¢é˜Ÿç®¡ç†å™¨ï¼‰
- æ–°å¢ `infrastructure/team/storage.go`ï¼ˆå›¢é˜Ÿæ•°æ®å­˜å‚¨ï¼‰
- æ–°å¢ `interfaces/http/handler/team.go`ï¼ˆå›¢é˜Ÿ APIï¼‰

### Phase 4: å›¢é˜ŸæŠ€èƒ½å‘å¸ƒä¸ç›®å½•ç®¡ç†
- æ–°å¢ `infrastructure/marketplace/team_skill_loader.go`
- æ‰©å±• `application/marketplace/service.go`ï¼ˆæ”¯æŒå›¢é˜ŸæŠ€èƒ½ï¼‰
- æ–°å¢ `infrastructure/team/skill_index.go`ï¼ˆæŠ€èƒ½ç›®å½•ç®¡ç†ï¼‰

### Phase 5: æŠ€èƒ½ä¸‹è½½ä¸åŒæ­¥
- æ–°å¢ `infrastructure/marketplace/team_skill_downloader.go`
- æ–°å¢ `application/team/sync_service.go`ï¼ˆåŒæ­¥æœåŠ¡ï¼‰
- æ‰©å±• `infrastructure/marketplace/skill_installer.go`ï¼ˆæ”¯æŒå›¢é˜ŸæŠ€èƒ½å®‰è£…ï¼‰

### Phase 6: WebSocket å®æ—¶é€šçŸ¥
- å®Œå–„ `infrastructure/p2p/websocket.go`ï¼ˆäº‹ä»¶å¹¿æ’­ï¼‰
- æ–°å¢ `infrastructure/p2p/connection_manager.go`ï¼ˆè¿æ¥ç®¡ç†ï¼‰

### Phase 7: å‰ç«¯ - å›¢é˜Ÿç®¡ç†
- æ–°å¢ `webview/components/Team/TeamList.tsx`
- æ–°å¢ `webview/components/Team/TeamCreate.tsx`
- æ–°å¢ `webview/components/Team/TeamJoin.tsx`
- æ–°å¢ `webview/components/Team/MemberList.tsx`
- æ‰©å±• `webview/services/api.ts`ï¼ˆå›¢é˜Ÿ APIï¼‰

### Phase 8: å‰ç«¯ - æŠ€èƒ½å¸‚åœºæ”¹é€ 
- æ‰©å±• `webview/components/Marketplace.tsx`ï¼ˆæ¥æºç­›é€‰ã€å›¢é˜Ÿç­›é€‰ï¼‰
- æ–°å¢ `webview/components/Marketplace/PublishSkillModal.tsx`
- æ‰©å±• `webview/types/index.ts`ï¼ˆæ–°å¢ç±»å‹ï¼‰

### Phase 9: æµ‹è¯•ä¸å®Œå–„
- å•å…ƒæµ‹è¯•
- é›†æˆæµ‹è¯•
- ç«¯åˆ°ç«¯æµ‹è¯•

---

## 16. å†³ç­–è®°å½•

| # | é—®é¢˜ | å†³ç­– |
|---|------|------|
| 1 | å›¢é˜Ÿå‘ç°æ–¹å¼ | å±€åŸŸç½‘ mDNS + æ‰‹åŠ¨è¾“å…¥ IP |
| 2 | Leader æ¨¡å¼ | æ¯å›¢é˜Ÿä¸€ä¸ª Leaderï¼Œç»´æŠ¤ç›®å½•å’Œæˆå‘˜ |
| 3 | Leader ç¦»çº¿ | é™çº§æ¨¡å¼ï¼Œä½¿ç”¨æœ¬åœ°ç¼“å­˜ |
| 4 | é€šçŸ¥æœºåˆ¶ | WebSocket æ¨é€ + è½®è¯¢å…œåº• |
| 5 | æƒé™æ§åˆ¶ | æ‰€æœ‰æˆå‘˜å¯å‘å¸ƒï¼Œæ— éœ€æ‰¹å‡† |
| 6 | è·¨ç½‘ç»œ | ä»…å±€åŸŸç½‘ï¼Œä¸æ”¯æŒ NAT ç©¿é€ |
| 7 | ç‰ˆæœ¬ç®¡ç† | è¦†ç›–å¼æ›´æ–°ï¼Œåªä¿ç•™æœ€æ–° |
| 8 | ä¸‹è½½è§¦å‘ | è‡ªåŠ¨ä¸‹è½½å…ƒæ•°æ®ï¼Œæ‰‹åŠ¨ä¸‹è½½æ–‡ä»¶ |
| 9 | ç¦»çº¿ä¸‹è½½ | ä½œè€…ç¦»çº¿æ—¶æ— æ³•ä¸‹è½½ |
| 10 | æŠ€èƒ½åˆ é™¤ | ä»…ä»ç›®å½•ç§»é™¤ï¼Œå·²ä¸‹è½½å¯ç”¨ |
| 11 | Team Project èŒƒå›´ | æ‰€æœ‰å›¢é˜Ÿæˆå‘˜å¯è§ |
| 12 | èº«ä»½è®¾ç½® | é¦–æ¬¡è¿›å…¥æ—¶å¼¹çª—è®¾ç½® |
| 13 | å¤šå›¢é˜Ÿ Leader | ä¸æ”¯æŒï¼Œä¸€ä¸ª daemon åªèƒ½åˆ›å»ºä¸€ä¸ªå›¢é˜Ÿ |
| 14 | ç¦»çº¿å‘å¸ƒ | ä¸æ”¯æŒï¼Œå¿…é¡» Leader åœ¨çº¿ |
| 15 | åŠ å…¥æ‰¹å‡† | ä¸éœ€è¦ï¼ŒçŸ¥é“åœ°å€å³å¯åŠ å…¥ |
| 16 | é€šä¿¡åè®® | HTTPï¼ˆå±€åŸŸç½‘å†…å¯æ¥å—ï¼‰ |
| 17 | æŠ€èƒ½å¸‚åœºæ•´åˆ | æ•´åˆåˆ°ç°æœ‰ /marketplace é¡µé¢ |
| 18 | å‘½åç©ºé—´ | å¤åˆ IDï¼ˆteam_id:plugin_idï¼‰ |
| 19 | å®‰è£…ä½ç½® | é‡å‘½åé¿å…å†²çªï¼ˆteam_id-skill_nameï¼‰ |
| 20 | AGENTS.md | å¢åŠ æ¥æºæ ‡ç­¾ |
| 21 | ç­›é€‰äº¤äº’ | ä¸‹æ‹‰é€‰æ‹©å™¨ |
| 22 | æˆå‘˜çŠ¶æ€ | WebSocket è¿æ¥çŠ¶æ€ |
| 23 | å‘å¸ƒæ¥æº | é€‰æ‹©ç›®å½•å‘å¸ƒ |
| 24 | å‘å¸ƒå…¥å£ | ä»…æŠ€èƒ½å¸‚åœº |
| 25 | æ›´æ–°æ£€æµ‹ | æ¨é€ + æ‰“å¼€æ—¶æ£€æŸ¥ |
| 26 | å¤šå›¢é˜Ÿæ˜¾ç¤º | ç­›é€‰å™¨é€‰æ‹©å›¢é˜Ÿ |
| 27 | åç§°ä¿®æ”¹ | å…è®¸ä¿®æ”¹ |
| 28 | å›¢é˜Ÿæ’åº | Leader ç½®é¡¶ï¼Œå…¶ä½™æŒ‰åŠ å…¥æ—¶é—´ |
| 29 | ç¦»å¼€ç¡®è®¤ | äºŒæ¬¡ç¡®è®¤ï¼ŒLeader ä¸èƒ½ç¦»å¼€ |
| 30 | ç«¯å£å†²çª | å¯åŠ¨å¤±è´¥æç¤º |
| 31 | WebSocket è®¤è¯ | æˆå‘˜ ID æ ¡éªŒ |
| 32 | æ–‡ä»¶å­˜å‚¨ | ç•™åœ¨ä½œè€…æœ¬åœ° |
| 33 | é€‰æ‹©ç›®å½• | VSCode åŸç”Ÿå¯¹è¯æ¡† |
| 34 | å¹¶å‘ä¸‹è½½ | æ— é™åˆ¶ï¼ˆMVPï¼‰ |
| 35 | ç‰ˆæœ¬å·æ¥æº | ä» SKILL.md frontmatter è¯»å– |
| 36 | å¤šç½‘å¡å¤„ç† | åˆ›å»ºå›¢é˜Ÿæ—¶é€‰æ‹©ç½‘å¡ï¼ŒåŠ å…¥æ—¶è‡ªåŠ¨åŒ¹é…åŒç½‘æ®µ |
| 37 | mDNS å¹¿æ’­ | åœ¨æ‰€æœ‰æœ‰æ•ˆç½‘å¡ä¸Šå¹¿æ’­ |
| 38 | è¿æ¥å›é€€ | ä¸»åœ°å€å¤±è´¥æ—¶å°è¯•å…¶ä»–åœ°å€ |

---

## 17. MVP èŒƒå›´

### åŒ…å«

- âœ… åˆ›å»ºå›¢é˜Ÿï¼ˆæˆä¸º Leaderï¼‰
- âœ… å±€åŸŸç½‘ mDNS å‘ç°å›¢é˜Ÿ
- âœ… æ‰‹åŠ¨è¾“å…¥ IP åŠ å…¥å›¢é˜Ÿ
- âœ… å‘å¸ƒå›¢é˜Ÿå…¨å±€æŠ€èƒ½
- âœ… å‘å¸ƒå›¢é˜Ÿé¡¹ç›®çº§æŠ€èƒ½
- âœ… æµè§ˆå›¢é˜ŸæŠ€èƒ½ç›®å½•
- âœ… ä»ä½œè€…ä¸‹è½½æŠ€èƒ½
- âœ… å®‰è£…å›¢é˜ŸæŠ€èƒ½
- âœ… WebSocket å®æ—¶é€šçŸ¥
- âœ… Leader ç¦»çº¿é™çº§ï¼ˆä½¿ç”¨ç¼“å­˜ï¼‰

### ä¸åŒ…å«ï¼ˆåç»­ç‰ˆæœ¬ï¼‰

- âŒ Leader è¿ç§»/è½¬è®©
- âŒ æŠ€èƒ½ç‰ˆæœ¬å†å²
- âŒ ç¦»çº¿å‘å¸ƒé˜Ÿåˆ—
- âŒ æˆå‘˜æƒé™ç®¡ç†
- âŒ è·¨ç½‘ç»œ NAT ç©¿é€
- âŒ æŠ€èƒ½è¯„åˆ†/è¯„è®º
- âŒ ç¤¾åŒºå…¬å…±å¸‚åœº

---

## 18. å®‰å…¨è€ƒè™‘

### 18.1 å½“å‰ï¼ˆMVPï¼‰

- é€šä¿¡ä½¿ç”¨ HTTPï¼ˆå±€åŸŸç½‘å†…å¯æ¥å—ï¼‰
- åŠ å…¥æ— éœ€æ‰¹å‡†ï¼ˆç®€åŒ–æµç¨‹ï¼‰
- WebSocket ä½¿ç”¨æˆå‘˜ ID æ ¡éªŒ
- ä¸‹è½½æ—¶æ ¡éªŒ checksum

### 18.2 æœªæ¥å¢å¼º

- å¯é€‰ HTTPS æ”¯æŒ
- Leader å®¡æ‰¹åŠ å…¥è¯·æ±‚
- æŠ€èƒ½ç­¾åéªŒè¯
- ç«¯åˆ°ç«¯åŠ å¯†
