basePath: /api/v1
definitions:
  github_com_cocursor_backend_internal_application_cursor.GenerationWithSource:
    properties:
      generationUUID:
        description: 生成的唯一标识符
        type: string
      source:
        description: 工作区 ID
        type: string
      textDescription:
        description: AI 的实际回复内容或操作描述
        type: string
      type:
        description: 生成类型：composer/chat/tab
        type: string
      unixMs:
        description: Unix 时间戳（毫秒）
        type: integer
    type: object
  github_com_cocursor_backend_internal_application_cursor.HealthInfo:
    properties:
      entropy:
        description: 熵值
        type: number
      status:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_application_cursor.HealthStatus'
        description: 健康状态
      warning:
        description: 警告信息（如果有）
        type: string
    type: object
  github_com_cocursor_backend_internal_application_cursor.HealthStatus:
    enum:
    - healthy
    - sub_healthy
    - dangerous
    type: string
    x-enum-varnames:
    - HealthStatusHealthy
    - HealthStatusSubHealthy
    - HealthStatusDangerous
  github_com_cocursor_backend_internal_application_cursor.PromptWithSource:
    properties:
      prompt:
        additionalProperties: true
        type: object
      source:
        description: 工作区 ID
        type: string
    type: object
  github_com_cocursor_backend_internal_application_cursor.SessionWithSource:
    properties:
      composerId:
        description: 会话唯一标识符
        type: string
      contextUsagePercent:
        description: 代码变更统计（关键字段）
        type: number
      createdAt:
        description: 创建时间戳（毫秒）
        type: integer
      createdOnBranch:
        description: 创建时的 Git 分支
        type: string
      filesChangedCount:
        description: 变更的文件数量
        type: integer
      forceMode:
        description: 强制模式
        type: string
      hasBlockingPendingActions:
        type: boolean
      hasUnreadMessages:
        description: 状态标志
        type: boolean
      isArchived:
        type: boolean
      isDraft:
        type: boolean
      isSpec:
        type: boolean
      isWorktree:
        type: boolean
      lastUpdatedAt:
        description: 最后更新时间戳（毫秒）
        type: integer
      name:
        description: 会话名称
        type: string
      numSubComposers:
        description: 层级关系
        type: integer
      referencedPlans:
        description: 引用的计划列表
        items:
          type: string
        type: array
      source:
        description: 工作区 ID
        type: string
      subtitle:
        description: 涉及的文件列表（逗号分隔）
        type: string
      totalLinesAdded:
        description: 总添加行数
        type: integer
      totalLinesRemoved:
        description: 总删除行数
        type: integer
      type:
        description: 基础信息
        type: string
      unifiedMode:
        description: 模式信息
        type: string
    type: object
  github_com_cocursor_backend_internal_application_notification.CreateNotificationDTO:
    properties:
      message:
        type: string
      teamCode:
        type: string
      title:
        type: string
      type:
        type: integer
    required:
    - message
    - teamCode
    - title
    type: object
  github_com_cocursor_backend_internal_domain_cursor.AIUsageSummary:
    properties:
      active_sessions:
        description: 活跃会话数
        type: integer
      total_chats:
        description: 总对话数
        type: integer
      total_generations:
        description: 总生成数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.CodeBlock:
    properties:
      code:
        description: 代码内容
        type: string
      language:
        description: 语言（如 "go", "typescript"）
        type: string
    type: object
  github_com_cocursor_backend_internal_domain_cursor.CodeChangeSummary:
    properties:
      files_changed:
        description: 变更文件数
        type: integer
      total_lines_added:
        description: 总添加行数
        type: integer
      total_lines_removed:
        description: 总删除行数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.ComposerData:
    properties:
      composerId:
        description: 会话唯一标识符
        type: string
      contextUsagePercent:
        description: 代码变更统计（关键字段）
        type: number
      createdAt:
        description: 创建时间戳（毫秒）
        type: integer
      createdOnBranch:
        description: 创建时的 Git 分支
        type: string
      filesChangedCount:
        description: 变更的文件数量
        type: integer
      forceMode:
        description: 强制模式
        type: string
      hasBlockingPendingActions:
        type: boolean
      hasUnreadMessages:
        description: 状态标志
        type: boolean
      isArchived:
        type: boolean
      isDraft:
        type: boolean
      isSpec:
        type: boolean
      isWorktree:
        type: boolean
      lastUpdatedAt:
        description: 最后更新时间戳（毫秒）
        type: integer
      name:
        description: 会话名称
        type: string
      numSubComposers:
        description: 层级关系
        type: integer
      referencedPlans:
        description: 引用的计划列表
        items:
          type: string
        type: array
      subtitle:
        description: 涉及的文件列表（逗号分隔）
        type: string
      totalLinesAdded:
        description: 总添加行数
        type: integer
      totalLinesRemoved:
        description: 总删除行数
        type: integer
      type:
        description: 基础信息
        type: string
      unifiedMode:
        description: 模式信息
        type: string
    type: object
  github_com_cocursor_backend_internal_domain_cursor.ConversationOverview:
    properties:
      active_sessions:
        description: 活跃会话数
        type: integer
      latest_chat_time:
        description: 最近对话时间（ISO 8601）
        type: string
      time_since_last_gen:
        description: 距离最近生成的时间（分钟）
        type: number
      total_chats:
        description: 总对话数
        type: integer
      total_generations:
        description: 总生成数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.DailyAcceptanceStats:
    properties:
      composer_acceptance_rate:
        description: Composer 接受率（百分比，计算字段）
        type: number
      composerAcceptedLines:
        description: Composer 接受的代码行数
        type: integer
      composerSuggestedLines:
        description: Composer 建议的代码行数
        type: integer
      data_quality:
        description: 数据质量标识：normal/warning/invalid
        type: string
      date:
        description: 日期 YYYY-MM-DD
        type: string
      tab_acceptance_rate:
        description: Tab 接受率（百分比，计算字段）
        type: number
      tabAcceptedLines:
        description: Tab 接受的代码行数
        type: integer
      tabSuggestedLines:
        description: Tab 建议的代码行数
        type: integer
      warning_message:
        description: 警告信息
        type: string
    type: object
  github_com_cocursor_backend_internal_domain_cursor.DailyCodeChanges:
    properties:
      date:
        description: 日期 YYYY-MM-DD
        type: string
      files_changed:
        description: 变更文件数
        type: integer
      lines_added:
        description: 添加行数
        type: integer
      lines_removed:
        description: 删除行数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.DailyReport:
    properties:
      acceptance_rate:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.DailyAcceptanceStats'
        description: 接受率统计
      ai_usage:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.AIUsageSummary'
        description: AI 使用统计
      code_changes:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.CodeChangeSummary'
        description: 代码变更汇总
      date:
        description: 日期 YYYY-MM-DD
        type: string
      top_files:
        description: Top N 文件引用
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.FileReference'
        type: array
      top_sessions:
        description: Top N 会话
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.SessionSummary'
        type: array
      workspace_id:
        description: 工作区 ID
        type: string
    type: object
  github_com_cocursor_backend_internal_domain_cursor.EfficiencyMetrics:
    properties:
      avg_context_usage:
        description: 平均上下文使用率
        type: number
      avg_session_entropy:
        description: 平均会话熵值
        type: number
      entropy_trend:
        description: 熵值趋势
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.EntropyTrendItem'
        type: array
    type: object
  github_com_cocursor_backend_internal_domain_cursor.EntropyTrendItem:
    properties:
      date:
        description: 日期 YYYY-MM-DD
        type: string
      value:
        description: 熵值
        type: number
    type: object
  github_com_cocursor_backend_internal_domain_cursor.FileReference:
    properties:
      file_name:
        description: 文件名
        type: string
      file_type:
        description: 文件类型（从扩展名推断）
        type: string
      reference_count:
        description: 引用次数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.Message:
    properties:
      code_blocks:
        description: 代码块（如果有）
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.CodeBlock'
        type: array
      files:
        description: 引用的文件（如果有）
        items:
          type: string
        type: array
      text:
        description: 消息文本
        type: string
      timestamp:
        description: 时间戳（毫秒）
        type: integer
      type:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.MessageType'
        description: 消息类型：user/ai
    type: object
  github_com_cocursor_backend_internal_domain_cursor.MessageType:
    enum:
    - user
    - ai
    type: string
    x-enum-comments:
      MessageTypeAI: AI 消息
      MessageTypeUser: 用户消息
    x-enum-descriptions:
    - 用户消息
    - AI 消息
    x-enum-varnames:
    - MessageTypeUser
    - MessageTypeAI
  github_com_cocursor_backend_internal_domain_cursor.ProjectInfo:
    properties:
      created_at:
        description: 项目首次发现时间
        type: string
      git_branch:
        description: Git 分支（如果有）
        type: string
      git_remote_url:
        description: Git 远程仓库 URL（如果有）
        type: string
      last_updated_at:
        description: 最后更新时间
        type: string
      project_id:
        description: 项目唯一 ID
        type: string
      project_name:
        description: 项目名称（唯一）
        type: string
      workspaces:
        description: 包含的所有工作区
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkspaceInfo'
        type: array
    type: object
  github_com_cocursor_backend_internal_domain_cursor.SessionDetail:
    properties:
      has_more:
        description: 是否还有更多消息
        type: boolean
      messages:
        description: 消息列表（按时间排序）
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.Message'
        type: array
      session:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.ComposerData'
        description: 会话元数据
      total_messages:
        description: 总消息数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.SessionSummary:
    properties:
      composer_id:
        description: 会话 ID
        type: string
      duration:
        description: 持续时间（分钟）
        type: number
      entropy:
        description: 熵值
        type: number
      files_changed:
        description: 变更文件数
        type: integer
      name:
        description: 会话名称
        type: string
      total_lines:
        description: 总变更行数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.TimeDistributionItem:
    properties:
      count:
        description: 该时段的活跃次数
        type: integer
      day:
        description: 星期几（0=周日, 1=周一, ...）
        type: integer
      hour:
        description: 小时（0-23）
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.TokenByType:
    properties:
      chat:
        description: 普通聊天
        type: integer
      composer:
        description: Composer 模式
        type: integer
      tab:
        description: Tab 自动补全
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.TokenUsage:
    properties:
      by_type:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.TokenByType'
        description: 按类型分类
      date:
        description: 日期 YYYY-MM-DD
        type: string
      total_tokens:
        description: 总 Token 数
        type: integer
      trend:
        description: 趋势（与昨日对比），如 "+15%" 或 "-5%"
        type: string
    type: object
  github_com_cocursor_backend_internal_domain_cursor.WorkAnalysis:
    properties:
      code_changes_trend:
        description: 代码变更趋势
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.DailyCodeChanges'
        type: array
      efficiency_metrics:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.EfficiencyMetrics'
        description: 效率指标
      overview:
        allOf:
        - $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkAnalysisOverview'
        description: 概览指标
      time_distribution:
        description: 时间分布（用于热力图）
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.TimeDistributionItem'
        type: array
      top_files:
        description: Top N 文件引用
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.FileReference'
        type: array
    type: object
  github_com_cocursor_backend_internal_domain_cursor.WorkAnalysisOverview:
    properties:
      acceptance_rate:
        description: 平均接受率
        type: number
      active_sessions:
        description: 活跃会话数
        type: integer
      files_changed:
        description: 变更文件数
        type: integer
      total_lines_added:
        description: 总添加行数
        type: integer
      total_lines_removed:
        description: 总删除行数
        type: integer
    type: object
  github_com_cocursor_backend_internal_domain_cursor.WorkspaceInfo:
    properties:
      git_branch:
        description: Git 分支
        type: string
      git_remote_url:
        description: Git 远程 URL
        type: string
      is_active:
        description: 是否为当前活跃的工作区
        type: boolean
      is_primary:
        description: 是否为主工作区（最新的）
        type: boolean
      path:
        description: 项目路径
        type: string
      project_name:
        description: 所属项目名
        type: string
      workspace_id:
        description: Cursor 工作区 ID
        type: string
    type: object
  github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse:
    properties:
      code:
        type: integer
      detail:
        type: string
      message:
        type: string
    type: object
  github_com_cocursor_backend_internal_interfaces_http_response.Response:
    properties:
      code:
        type: integer
      data: {}
      message:
        type: string
    type: object
  internal_interfaces_http_handler.ActivateProjectRequest:
    properties:
      path:
        description: 项目路径
        type: string
      timestamp:
        description: 时间戳
        type: integer
    required:
    - path
    type: object
  internal_interfaces_http_handler.ActivateProjectResponse:
    properties:
      is_active:
        type: boolean
      message:
        type: string
      project_id:
        type: string
      project_name:
        type: string
      success:
        type: boolean
      workspace_info:
        $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkspaceInfo'
    type: object
  internal_interfaces_http_handler.ProjectAcceptanceStatsResponse:
    properties:
      merged_stats:
        $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.DailyAcceptanceStats'
      project_name:
        type: string
      raw_stats:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.DailyAcceptanceStats'
        type: array
      workspaces:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkspaceInfo'
        type: array
    type: object
  internal_interfaces_http_handler.ProjectGenerationsResponse:
    properties:
      generations:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_application_cursor.GenerationWithSource'
        type: array
      project_name:
        type: string
      total:
        type: integer
      workspaces:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkspaceInfo'
        type: array
    type: object
  internal_interfaces_http_handler.ProjectPromptsResponse:
    properties:
      project_name:
        type: string
      prompts:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_application_cursor.PromptWithSource'
        type: array
      total:
        type: integer
      workspaces:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkspaceInfo'
        type: array
    type: object
  internal_interfaces_http_handler.ProjectSessionsResponse:
    properties:
      project_name:
        type: string
      sessions:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_application_cursor.SessionWithSource'
        type: array
      total:
        type: integer
      workspaces:
        items:
          $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkspaceInfo'
        type: array
    type: object
host: localhost:19960
info:
  contact: {}
  description: cocursor 守护进程 API 服务
  title: cocursor Daemon API
  version: "1.0"
paths:
  /notifications:
    post:
      consumes:
      - application/json
      parameters:
      - description: 通知信息
        in: body
        name: body
        required: true
        schema:
          $ref: '#/definitions/github_com_cocursor_backend_internal_application_notification.CreateNotificationDTO'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 创建通知
      tags:
      - 通知
  /project/{project_name}/generations:
    get:
      consumes:
      - application/json
      parameters:
      - description: 项目名称
        in: path
        name: project_name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/internal_interfaces_http_handler.ProjectGenerationsResponse'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 查询项目的 AI 生成记录
      tags:
      - 项目
  /project/{project_name}/prompts:
    get:
      consumes:
      - application/json
      parameters:
      - description: 项目名称
        in: path
        name: project_name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/internal_interfaces_http_handler.ProjectPromptsResponse'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 查询项目的 AI 对话历史
      tags:
      - 项目
  /project/{project_name}/sessions:
    get:
      consumes:
      - application/json
      parameters:
      - description: 项目名称
        in: path
        name: project_name
        required: true
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/internal_interfaces_http_handler.ProjectSessionsResponse'
              type: object
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 查询项目的 Composer 会话
      tags:
      - 项目
  /project/{project_name}/stats/acceptance:
    get:
      consumes:
      - application/json
      parameters:
      - description: 项目名称
        in: path
        name: project_name
        required: true
        type: string
      - description: 开始日期 YYYY-MM-DD，默认最近 7 天
        in: query
        name: start_date
        type: string
      - description: 结束日期 YYYY-MM-DD，默认今天
        in: query
        name: end_date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/internal_interfaces_http_handler.ProjectAcceptanceStatsResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 查询项目的接受率统计
      tags:
      - 项目
  /project/activate:
    post:
      consumes:
      - application/json
      description: 接收前端上报的当前项目路径，更新活跃状态
      parameters:
      - description: 激活请求
        in: body
        name: request
        required: true
        schema:
          $ref: '#/definitions/internal_interfaces_http_handler.ActivateProjectRequest'
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/internal_interfaces_http_handler.ActivateProjectResponse'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 激活项目
      tags:
      - 项目
  /project/list:
    get:
      consumes:
      - application/json
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.ProjectInfo'
                  type: array
              type: object
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 列出所有已发现的项目
      tags:
      - 项目
  /sessions/{sessionId}/detail:
    get:
      consumes:
      - application/json
      parameters:
      - description: 会话 ID
        in: path
        name: sessionId
        required: true
        type: string
      - description: 限制消息数量，默认 100，最大 1000
        in: query
        name: limit
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.SessionDetail'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取会话详情
      tags:
      - 会话
  /sessions/list:
    get:
      consumes:
      - application/json
      parameters:
      - description: 项目名称
        in: query
        name: project_name
        type: string
      - description: 每页条数，默认 20，最大 100
        in: query
        name: limit
        type: integer
      - description: 偏移量，默认 0
        in: query
        name: offset
        type: integer
      - description: 搜索关键词（会话名称）
        in: query
        name: search
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.ComposerData'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取会话列表
      tags:
      - 会话
  /stats/acceptance-rate:
    get:
      consumes:
      - application/json
      parameters:
      - description: 开始日期，格式 YYYY-MM-DD，默认最近 7 天
        in: query
        name: start_date
        type: string
      - description: 结束日期，格式 YYYY-MM-DD，默认今天
        in: query
        name: end_date
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.DailyAcceptanceStats'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取 AI 代码接受率统计
      tags:
      - 统计
  /stats/conversation-overview:
    get:
      consumes:
      - application/json
      description: 使用 project_name 参数查询项目，如果不提供则尝试从当前工作目录自动检测
      parameters:
      - description: 项目名称，如 cocursor（可通过 GET /api/v1/project/list 查看所有项目）
        in: query
        name: project_name
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.ConversationOverview'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取对话统计概览
      tags:
      - 统计
  /stats/current-session:
    get:
      consumes:
      - application/json
      description: 使用 project_name 参数查询项目，如果不提供则尝试从当前工作目录自动检测
      parameters:
      - description: 项目名称，如 cocursor（可通过 GET /api/v1/project/list 查看所有项目）
        in: query
        name: project_name
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_cocursor_backend_internal_application_cursor.HealthInfo'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取当前会话的健康状态
      tags:
      - 统计
  /stats/daily-report:
    get:
      consumes:
      - application/json
      description: 使用 project_name 参数查询项目，如果不提供则尝试从当前工作目录自动检测
      parameters:
      - description: 项目名称，如 cocursor（可通过 GET /api/v1/project/list 查看所有项目）
        in: query
        name: project_name
        type: string
      - description: 日期，格式 YYYY-MM-DD，默认今天
        in: query
        name: date
        type: string
      - description: Top N 会话数，默认 5，最大 20
        in: query
        name: top_n_sessions
        type: integer
      - description: Top N 文件数，默认 10，最大 50
        in: query
        name: top_n_files
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.DailyReport'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 生成日报
      tags:
      - 统计
  /stats/file-references:
    get:
      consumes:
      - application/json
      description: 使用 project_name 参数查询项目，如果不提供则尝试从当前工作目录自动检测
      parameters:
      - description: 项目名称，如 cocursor（可通过 GET /api/v1/project/list 查看所有项目）
        in: query
        name: project_name
        type: string
      - description: 返回前 N 个文件，默认 10，最大 50，最小 1
        in: query
        name: top_n
        type: integer
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  items:
                    $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.FileReference'
                  type: array
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "404":
          description: Not Found
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取文件引用分析
      tags:
      - 统计
  /stats/token-usage:
    get:
      consumes:
      - application/json
      parameters:
      - description: 日期，格式 YYYY-MM-DD，默认今天
        in: query
        name: date
        type: string
      - description: 项目名称，如 cocursor（可通过 GET /api/v1/project/list 查看所有项目）
        in: query
        name: project_name
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.TokenUsage'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取 Token 使用统计
      tags:
      - 统计
  /stats/work-analysis:
    get:
      consumes:
      - application/json
      parameters:
      - description: 开始日期，格式 YYYY-MM-DD，默认最近 7 天
        in: query
        name: start_date
        type: string
      - description: 结束日期，格式 YYYY-MM-DD，默认今天
        in: query
        name: end_date
        type: string
      - description: 项目名称，如 cocursor（不提供则跨项目聚合）
        in: query
        name: project_name
        type: string
      produces:
      - application/json
      responses:
        "200":
          description: OK
          schema:
            allOf:
            - $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.Response'
            - properties:
                data:
                  $ref: '#/definitions/github_com_cocursor_backend_internal_domain_cursor.WorkAnalysis'
              type: object
        "400":
          description: Bad Request
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
        "500":
          description: Internal Server Error
          schema:
            $ref: '#/definitions/github_com_cocursor_backend_internal_interfaces_http_response.ErrorResponse'
      summary: 获取工作分析数据
      tags:
      - 统计
schemes:
- http
swagger: "2.0"
